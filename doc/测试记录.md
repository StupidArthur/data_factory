# 预测功能测试记录

## 测试说明

本文档记录预测功能的实际测试情况，包括测试结果、发现的问题、以及测试结论。

---

## 测试项1：单一正弦波基础测试

**测试时间**：2025-11-28  
**测试配置**：`config/test_case_01_single_sine.yaml`  
**测试目的**：验证最基本的单一参数预测场景

### 测试结果
❌ **测试失败**

### 失败原因
预测的输入数据和目标数据不能重复，所以单参数无法测试。

### 问题分析
- 预测功能需要至少两个参数
- 一个参数作为输入数据（特征）
- 另一个参数作为目标数据（预测目标）
- 单参数场景下，输入和目标相同，无法进行预测

### 结论
单参数测试不适用于预测功能测试场景。需要至少两个参数才能进行预测测试。

### 建议
- 跳过单参数测试
- 从多参数测试开始（测试项2）
- 更新测试方案，说明单参数测试的限制

---

## 测试项2：多参数独立正弦波测试

**测试时间**：2025-11-28  
**测试配置**：`config/test_case_02_multi_sine.yaml`  
**测试目的**：验证多个独立参数同时预测的场景

### 测试结果
✅ **测试成功**

### 测试结论
多参数独立正弦波测试成功，预测功能能够处理多个独立参数的场景。

---

## 测试项2b：随机数输入+正弦目标测试

**测试时间**：2025-11-28  
**测试配置**：`config/test_case_02b_random_sine.yaml`  
**测试目的**：测试用随机数作为输入，正弦作为目标，是否能预测正弦的未来

### 测试数据特征
- 输入参数：F.random（-100到100的均匀随机数）
- 目标参数：F.sine（正弦波，振幅100，周期1小时）
- 测试场景：用无规律的随机数预测有规律的正弦波

### 预期结果
1. 生成包含3列的数据（timeStamp, F.random, F.sine）
2. F.random呈现随机分布（-100到100）
3. F.sine呈现标准正弦波形态
4. 验证预测模型是否能从随机输入中学习到正弦波的规律

### 验证方法
1. 检查数据列数是否为3列
2. 可视化F.random，确认随机分布
3. 可视化F.sine，确认正弦波形态
4. 检查两个参数之间的相关性（应该很低，因为随机数和正弦波无关联）
5. 使用预测模型测试，验证是否能从随机输入预测正弦波未来

### 测试状态
⏳ **待测试**

---

## 测试总结

### 已测试项
- ✅ 测试项1：单一正弦波基础测试（失败 - 不适用）
- ✅ 测试项2：多参数独立正弦波测试（成功）
- ✅ 测试项3：滞后跟随关系测试（成功 - 验证3b）

### 待测试项
- ⏳ 测试项2b：随机数输入+正弦目标测试（新增）
- ⏳ 测试项4a：滞后多项式关系测试（value3 = value1 + 3*value2，滞后5分钟，随机游走源数据）
- ⏳ 测试项4b：滞后非线性关系测试（value3 = sqrt(value1*value2)，滞后5分钟，随机游走源数据）
- ⏳ 测试项4c：多项式关系测试（value3 = value1 + value2，无滞后，正弦波源数据）
- ⏳ 测试项4d：滞后多项式关系测试（value3 = value1 + value2，滞后5分钟，正弦波源数据）
- ⏳ 测试项4e：多参数滞后多项式关系测试（value10 = 1*v1+2*v2+...+9*v9，滞后5分钟，9个随机游走源数据）
- ⏳ 测试项4f：混合源数据滞后多项式关系测试（value3 = value1 + value2，滞后5分钟，正弦波+随机游走源数据）
- ⏳ 测试项4g：级联滞后多项式关系测试（value3 = value1 + 3*value2，value4 = value3 + 0.5*value1 + 0.5*value2，两层滞后）
- ⏳ 测试项5：组合关系测试
- ⏳ 测试项6：噪声影响测试
- ⏳ 测试项7：相位差测试
- ⏳ 测试项8：复杂组合场景测试

---

## 测试项3更新说明

**更新时间**：2025-11-28  
**更新原因**：原配置使用正弦波作为源数据，但正弦波本身有周期性规律，即使没有跟随关系也能预测出来，无法真正验证滞后跟随关系。

### 更新内容
- **源数据**：从正弦波改为0~100的随机数（F.value1）
- **跟随数据**：滞后跟随F.value1，滞后5分钟（300秒），敏感度1.0（F.value2）
- **参数命名**：使用F.value1、F.value2，不表达具体意义
- **测试目的**：使用随机数作为源数据，避免周期性规律影响，真正验证滞后跟随关系的预测能力

### 新配置特点
- F.value1：0~100均匀随机数，无规律
- F.value2：完全跟随F.value1，但滞后5分钟
- 预测模型必须识别滞后关系才能准确预测

---

## 测试项3：滞后跟随关系测试

**测试时间**：2025-11-28  
**测试配置**：
- 测试项3a：`config/test_case_03_lag_follow.yaml`（完全随机数）
- 测试项3b：`config/test_case_03b_lag_follow_constrained.yaml`（约束随机游走）

**测试目的**：验证滞后跟随关系的数据生成和预测能力

### 测试数据特征
- **测试项3a**：F.value1使用完全随机数（0~100均匀分布），F.value2滞后5分钟跟随
- **测试项3b**：F.value1使用约束随机游走（每次变化[-3, 3]，值范围[0, 100]），F.value2滞后5分钟跟随

### 测试策略
- 测试项3b的单次波动较小，更方便验证
- 测试项3b的测试场景能覆盖测试项3a
- **只验证测试项3b**

### 测试结果
✅ **测试通过**

### 验证结果
- **数据生成**：滞后跟随关系正确实现
- **预测验证**：
  - 因为滞后5分钟，预测的前5分钟数据是相对准确的
  - 后5分钟是未知的（因为需要未来的value1数据）
  - 与预期符合

### 测试结论
测试项3b验证结果良好，滞后跟随关系正确实现。预测模型能够识别5分钟的滞后关系，前5分钟的预测数据相对准确，符合预期。

### 与测试项3a的关系
- 测试项3a使用完全随机数，波动较大
- 测试项3b使用约束随机游走，单次波动较小，更便于验证
- 测试项3b的测试场景能覆盖测试项3a，因此只验证3b即可

---

## 备注

- 测试记录会持续更新
- 每次测试完成后会更新本文档
- 发现的问题会记录在对应测试项中

