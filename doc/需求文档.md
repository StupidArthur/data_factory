# 数据工厂 - 需求文档

## 1. 项目概述

数据工厂是一个用于生成、管理各种模式、工况数据的系统，主要用于测试工业大模型的预测能力。

### 1.1 项目目标

- 生成符合工业场景的时间序列数据
- 支持多种数据关系模式（时间规律、滞后跟随、多项式关系等）
- 提供灵活的数据输出模板管理
- 提供数据可视化工具

### 1.2 应用场景

- 工业大模型预测能力测试
- 数据生成和模拟
- 数据关系验证

## 2. 功能需求

### 2.1 预测数据集生成

#### 2.1.1 数据规模
- 历史数据：10000点
- 未来数据：120点（10分钟）
- 时间间隔：5秒
- 总数据点：10120点

#### 2.1.2 数据关系类型

**时间规律变化**
- 描述：某些数据会随着时间进行有规则地变化
- 示例：光照强度随日出日落变化
- 支持模式：正弦/余弦周期、线性趋势、指数趋势

**滞后线性跟随**
- 描述：某些数据会跟随其他参数，形成滞后的线性跟随
- 示例：热水器的水温随电功率呈现滞后的上涨
- 参数：滞后时间、敏感度、衰减率

**多项式关系**
- 描述：某些数据由其他多个参数形成多项式关系
- 示例：a = kx + ly + mz + n
- 支持：线性项、交叉项、常数项

**组合关系**
- 描述：以上基本逻辑的无限组合
- 支持：线性组合、乘积组合

### 2.2 数据模板管理

#### 2.2.1 CSV格式要求
- 第一行：变量名（timeStamp + 参数名列表）
- 第二行：变量描述
- 第三行开始：数据

#### 2.2.2 模板配置选项
- 时间格式：
  - Unix时间戳
  - 2024-1-1 00:00:00
  - 2024/1/1 00:00:05
- 标题行：可选
- 描述行：可选

### 2.3 数据输出

- 支持标准CSV格式输出
- 支持增量式导出（大数据集）
- 输出文件名自动添加时间戳
- 与模板管理模块分离

### 2.4 数据可视化工具

#### 2.4.1 功能要求
- 支持数据生成前的预览
- 支持已生成数据的展示
- 支持时间窗口拖拽
- 支持缩放显示

#### 2.4.2 界面要求
- 使用PyQt6实现
- 提供文件加载功能
- 提供显示控制功能
- 提供缩放控制功能

## 3. 非功能需求

### 3.1 性能要求
- 数据生成速度：10000点数据应在合理时间内完成（<1分钟）
- 增量导出：支持大数据集的增量式导出

### 3.2 可扩展性要求
- 能力模板系统支持插件化扩展
- 支持自定义能力模板
- 配置参数全部可配置

### 3.3 可维护性要求
- 代码模块化设计
- 数据生成逻辑与模板管理分离
- 详细的代码注释

### 3.4 日志要求
- 支持文件日志输出
- 支持控制台日志输出
- 日志文件自动按时间命名

## 4. 技术约束

### 4.1 开发环境
- Python 3.13
- pandas
- scipy
- PyQt6

### 4.2 数据格式
- 输入：JSON配置文件
- 输出：CSV文件

## 5. 用户角色

### 5.1 数据生成人员
- 配置数据生成参数
- 选择能力模板
- 生成和导出数据

### 5.2 数据分析人员
- 查看生成的数据
- 使用可视化工具分析数据
- 验证数据关系

## 6. 验收标准

1. 能够生成符合要求的时间序列数据（10120点）
2. 支持所有定义的数据关系类型
3. 支持多种CSV输出格式
4. 可视化工具功能完整可用
5. 所有参数可配置
6. 代码结构清晰，易于扩展

